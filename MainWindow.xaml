<Window x:Class="PokerGame.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PokerGame"
        Title="Quantum Video Poker" Height="750" Width="1200">
    <Window.Background>
        <ImageBrush ImageSource="Assets/background.png" Stretch="UniformToFill"/>
    </Window.Background>
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>

        <Style TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" BorderThickness="1" BorderBrush="#88FFFFFF">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#444" Offset="0"/>
                                    <GradientStop Color="#222" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#555"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#333"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="16"/>
        </Style>

        <Style x:Key="ActionButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
             <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="10" BorderThickness="2" BorderBrush="#FFFF00">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#CC0000" Offset="0"/>
                                    <GradientStop Color="#880000" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#DD0000"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#660000"/>
                            </Trigger>
                             <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="FontSize" Value="24"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Header -->
            <RowDefinition Height="*"/>    <!-- Cards -->
            <RowDefinition Height="Auto"/> <!-- Controls -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" HorizontalAlignment="Center" Margin="20">
            <TextBlock Text="QUANTUM VIDEO POKER" Foreground="#FFD700" FontSize="48" FontWeight="Bold" HorizontalAlignment="Center">
                <TextBlock.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="5"/>
                </TextBlock.Effect>
            </TextBlock>
            <Border Background="#88000000" CornerRadius="10" Padding="20,5" Margin="0,10,0,0" HorizontalAlignment="Center">
                <TextBlock x:Name="StatusText" Text="{Binding StatusText}" Foreground="{Binding StatusBrush}" FontSize="28" HorizontalAlignment="Center" FontWeight="SemiBold"/>
            </Border>
        </StackPanel>

        <!-- Cards Area -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
            <local:CardControl x:Name="Card1" Margin="15" MouseDown="Card_MouseDown"/>
            <local:CardControl x:Name="Card2" Margin="15" MouseDown="Card_MouseDown"/>
            <local:CardControl x:Name="Card3" Margin="15" MouseDown="Card_MouseDown"/>
            <local:CardControl x:Name="Card4" Margin="15" MouseDown="Card_MouseDown"/>
            <local:CardControl x:Name="Card5" Margin="15" MouseDown="Card_MouseDown"/>
        </StackPanel>

        <!-- Controls & Info -->
        <Border Grid.Row="2" Background="#CC000000" Padding="20" BorderBrush="#FFD700" BorderThickness="0,2,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left: Info -->
                <StackPanel Grid.Column="0" VerticalAlignment="Center" Margin="20,0">
                    <TextBlock Text="CREDITS" Foreground="#AAAAAA" FontSize="16"/>
                    <TextBlock x:Name="CreditsText" Text="{Binding Credits}" Foreground="#00FF00" FontSize="40" FontWeight="Bold">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#00FF00" BlurRadius="10" ShadowDepth="0"/>
                        </TextBlock.Effect>
                    </TextBlock>
                </StackPanel>

                <!-- Center: Action Buttons -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="BtnBetOne" Content="BET ONE" Width="120" Height="60" Margin="10"
                            Command="{Binding BetOneCommand}"
                            IsEnabled="{Binding IsBetEnabled}"
                            Visibility="{Binding ShowBetControls, Converter={StaticResource BoolToVis}}"/>
                    <Button x:Name="BtnBetMax" Content="BET MAX" Width="120" Height="60" Margin="10"
                            Command="{Binding BetMaxCommand}"
                            IsEnabled="{Binding IsBetEnabled}"
                            Visibility="{Binding ShowBetControls, Converter={StaticResource BoolToVis}}"/>
                    <Button x:Name="BtnDealDraw" Content="{Binding DealDrawLabel}" Width="160" Height="70" Margin="30,0"
                            Command="{Binding DealDrawCommand}"
                            IsEnabled="{Binding IsDealDrawEnabled}"
                            Visibility="{Binding ShowDealDrawButton, Converter={StaticResource BoolToVis}}"
                            Style="{StaticResource ActionButtonStyle}"/>
                    
                    <!-- Double Up Controls -->
                    <Button x:Name="BtnDouble" Content="DOUBLE" Width="120" Height="60" Margin="10"
                            Command="{Binding DoubleCommand}"
                            Visibility="{Binding ShowDoubleButton, Converter={StaticResource BoolToVis}}"
                            Background="#FF4500"/>
                    <Button x:Name="BtnCollect" Content="COLLECT" Width="120" Height="60" Margin="10"
                            Command="{Binding CollectCommand}"
                            Visibility="{Binding ShowCollectButton, Converter={StaticResource BoolToVis}}"
                            Background="#228B22"/>
                </StackPanel>

                <!-- Right: Bet Info -->
                <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="20,0">
                    <TextBlock Text="BET" Foreground="#AAAAAA" FontSize="16" HorizontalAlignment="Right"/>
                    <TextBlock x:Name="BetText" Text="{Binding SelectedBet}" Foreground="Yellow" FontSize="40" FontWeight="Bold" HorizontalAlignment="Right">
                         <TextBlock.Effect>
                            <DropShadowEffect Color="Yellow" BlurRadius="10" ShadowDepth="0"/>
                        </TextBlock.Effect>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
